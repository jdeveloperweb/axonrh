server:
  port: 8088

spring:
  application:
    name: ai-assistant-service

  # PostgreSQL for structured data
  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:axonrh}
    username: ${DB_USER:axonrh}
    password: ${DB_PASSWORD:axonrh123}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

  # MongoDB for AI conversations
  data:
    mongodb:
      uri: ${MONGODB_URI:mongodb://axonrh:axonrh123@localhost:27017/axonrh_conversations?connectTimeoutMS=30000&socketTimeoutMS=30000}

ai:
  openai:
    api-key: ${OPENAI_API_KEY:}
    model: ${OPENAI_MODEL:gpt-4o}
    max-tokens: ${OPENAI_MAX_TOKENS:4096}
    temperature: ${OPENAI_TEMPERATURE:0.7}
    timeout-seconds: ${AI_TIMEOUT_SECONDS:120}
  
  anthropic:
    api-key: ${ANTHROPIC_API_KEY:}
    model: ${ANTHROPIC_MODEL:claude-3-sonnet-20240229}
    max-tokens: ${ANTHROPIC_MAX_TOKENS:4096}
  
  default-provider: ${AI_DEFAULT_PROVIDER:openai}
  
  embeddings:
    dimensions: 1536

  milvus:
    host: ${MILVUS_HOST:localhost}
    port: ${MILVUS_PORT:19530}
    collection-name: hr_knowledge_base
    knowledge-update-interval: 24

assistant:
  conversation:
    context-window: 10
    auto-summarize-after: 20

security:
  jwt:
    secret: ${JWT_SECRET:your-secret-key}
    expiration: 86400000

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when_authorized

logging:
  level:
    root: INFO
    com.axonrh.ai: DEBUG
    org.springframework.data.mongodb: INFO

axonrh:
  flyway:
    repair-on-startup: true
